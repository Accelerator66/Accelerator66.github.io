{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue","webpack:///./src/components/Canvas.vue","webpack:///./src/scripts/circles.js","webpack:///./src/scripts/stars.js","webpack:///./src/components/Canvas.vue?f3c7","webpack:///./src/App.vue?eabf","webpack:///./src/main.js","webpack:///./src/App.vue?7d91","webpack:///./src/components/Canvas.vue?1e7f"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","width","height","class","ref","crossorigin","type","hidden","style","fontSizeName","undefined","player","musicName","musicAuthor","fontSizeAlbum","musicALbum","change_music_state","click_input","num_circles","max_r","min_r","max_v","min_v","max_vopa","min_vopa","margin","thetaR2xy","theta","cx","cy","x","Math","round","sin","y","cos","Circle","this","Circles","init","innerR","avgF","v","random","PI","vxy","opacity","vopa","next","draw","cont","beginPath","ga","globalAlpha","arc","fill","num","list","num_stars","Star","Stars","alpha","tr","omega","lineTo","FFTsz","Smoothing","powBaseRatio","barNumBase","log2","bars","info","ctxInfo","music","myAudioContext","click_count","ratio","particles","fileInput","angle","step","scaleR","scaleStep","color_groups","pos","code","musicPath","musicState","analyser","AudioContext","requestAnimationFrame","cancelAnimationFrame","computed","max","mounted","that","onload","$refs","getContext","myAudio","console","log","upload","onchange","fileName","URL","createObjectURL","files","change_music","draw_all","methods","click","prepare_pic","source","createMediaElementSource","createAnalyser","fftSize","smoothingTimeConstant","connect","destination","processor","createScriptProcessor","draw_smooth_curve","index","num_inds","ind","middle","p1","p2","theta0","theta1","theta2","point0","point1","point2","e","moveTo","quadraticCurveTo","draw_pic","w","h","contCenter","array","Uint8Array","frequencyBinCount","getByteFrequencyData","Array","from","avg","min","points","map","element","powBase","pow","inds","exp","pows","unique_inds","uniq","lineWidth","stroke","draw_info","clearRect","save","gradient","createRadialGradient","selector","addColorStop","strokeStyle","fillStyle","currentTime","duration","xpos","ypos","restore","init_music","then","metadata","common","title","artist","artists","join","album","catch","err","error","message","src","load","promise","play","_","path","pause","resume","init_canvas","canvas","context","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","oldWidth","oldHeight","scale","initCanvases","draw_frame","render","__scopeId","components","Canvas","app","createApp","App","use","ElementPlus","mount"],"mappings":"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","file":"js/app.7a5cf0bc.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","<template>\n  <Canvas :width=\"650\" :height=\"650\"></Canvas>\n</template>\n\n<script>\nimport Canvas from './components/Canvas.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    Canvas\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  /* margin-top: 60px; */\n\n  height: 100%;\n  background-color: black;\n  background: url(./assets/background.png);\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center center;\n}\n</style>\n","<template>\n  <div>\n    <div :style=\"{'width': `${width}px`, 'height': `${height}px`}\" class=\"outer-div\">\n      <div class=\"name-div\" :style=\"{'font-size': `${fontSizeName}px`}\">\n        {{this.player.musicName !== undefined? name = this.player.musicName: ''}}\n      </div>\n      <div class=\"author-div\">\n        {{this.player.musicAuthor !== undefined? name = this.player.musicAuthor: ''}}\n      </div>\n      <div class=\"album-div\" :style=\"{'font-size': `${fontSizeAlbum}px`}\">\n        {{this.player.musicALbum !== undefined? name = this.player.musicALbum: ''}}\n      </div>\n    </div>\n    <canvas ref=\"info\" class=\"center cvs\" v-on:click=\"change_music_state\"></canvas>\n    <audio ref=\"myAudio\" crossorigin=\"anonymous\"></audio>\n    <!-- <button class=\"mdl-button mdl-js-button mdl-button--accent add-btn\" onclick=\"click_input()\">\n      Upload Music\n    </button> -->\n    <el-button class=\"add-btn\" type=\"text\" v-on:click=\"click_input\">Upload Music</el-button>\n    <input ref=\"upload\" type=\"file\" hidden>\n  </div>\n</template>\n\n<script>\nimport _ from 'lodash'\nimport jsmediatags from 'jsmediatags'\nimport * as mmb from 'music-metadata-browser'\nimport Circles from '../scripts/circles.js'\nimport Stars from '../scripts/stars.js'\n\nexport default {\n  name: 'Canvas',\n  data() {\n    return {\n      // canvas parameters\n      height: 650,\n      width: 650,\n\n      // FFT drawer\n      FFTsz: 2048,\n      Smoothing: 0.9,\n      powBaseRatio: 0.25,\n      barNumBase: Math.log2(this.FFTsz),\n      bars: [],\n      info: null,\n      ctxInfo: null,\n      music: null,\n      myAudioContext: null,\n      click_count: 0,\n      ratio: null,\n      innerR: 190,\n      avgF: 0,\n\n      // particle effect\n      particles: null,\n\n      // upload music file\n      fileInput: null,\n\n      // dynamic progress bar drawer\n      angle: 0,\n      step: 0.01 * Math.PI,\n      scaleR: 2,\n      scaleStep: 0.25,\n      v: 1,\n\n      // color tables\n      color_groups: [\n          [{pos: 0, code: 'rgb(122,161,210)'}, {pos: 0.4, code: 'rgb(219,212,180)'}, {pos: 0.7, code: 'rgb(204,149,192)'}],\n          [{pos: 0, code: 'rgb(247,121,125)'}, {pos: 0.4, code: 'rgb(251,215,134)'}, {pos: 0.7, code: 'rgb(198,255,221)'}]\n      ],\n\n      // music\n      player: {\n          musicPath: null,\n          musicName: '等待上传',\n          musicAuthor: '请上传MP3文件',\n          musicALbum: '如果上传后没有自动开始播放，需要点击圆圈',\n          musicState: 'ready'\n      },\n\n      // FFT analyser\n      analyser: null,\n\n      // window object\n      AudioContext: null,\n      requestAnimationFrame: null,\n      cancelAnimationFrame: null\n    }\n  },\n  computed: {\n    fontSizeName: function () {\n      if (!this.player.musicName) return 35\n      return Math.max(35 - (this.player.musicName.length > 6 ? 1 : 0) * Math.round((this.player.musicName.length - 6) / 2), 20)\n    },\n    fontSizeAlbum: function () {\n      if (!this.player.musicALbum) return 12\n      return Math.max(12 - (this.player.musicALbum.length > 16 ? 1: 0) * Math.round((this.player.musicALbum.length - 16) / 4), 8)\n    }\n  },\n  mounted() {\n    const that = this\n    window.onload = function () {\n      // init music node\n      that.myAudioContext = new AudioContext()\n      // that.info = document.getElementById('info')\n      that.info = that.$refs.info\n      that.ctxInfo = that.info.getContext('2d')\n      // that.music = document.getElementById('myAudio')\n      that.music = that.$refs.myAudio\n      that.particles = new Stars()\n\n      console.log('Resume')\n      // create music file input\n      // that.fileInput = document.createElement('input')\n      // that.fileInput.type = 'file'\n      that.fileInput = that.$refs.upload\n      that.fileInput.onchange = function(){\n        let fileName = URL.createObjectURL(that.fileInput.files[0])\n        console.log(fileName)\n        that.change_music(fileName)\n      }\n      // draw\n      that.draw_all()\n    }\n  },\n  methods: {\n    click_input() {\n      if(this.fileInput === undefined || this.fileInput === null) return\n      this.fileInput.click()\n    },\n    prepare_pic() {\n      const source = this.myAudioContext.createMediaElementSource(this.music)\n      this.analyser = this.myAudioContext.createAnalyser()\n      this.analyser.fftSize = 2048\n      this.analyser.smoothingTimeConstant = this.Smoothing\n      source.connect(this.analyser)\n      this.analyser.connect(this.myAudioContext.destination)\n      const processor = this.myAudioContext.createScriptProcessor(1024)\n      processor.connect(this.myAudioContext.destination)\n      this.analyser.connect(processor)\n    },\n    // position transfer\n    thetaR2xy(theta, r, cx, cy) {\n      const x = Math.round(cx + r * Math.sin(theta))\n      const y = Math.round(cy - r * Math.cos(theta))\n      return {\n        x: x,\n        y: y\n      }\n    },\n    // draw curve smoothly\n    draw_smooth_curve(cont, data, index, cx, cy) {\n      const num_inds = index.length\n      const ind = function(i) {\n        return (i + num_inds) % num_inds\n      }\n      const middle = function(p1, p2) {\n        return {\n          x: (p1.x + p2.x) / 2,\n          y: (p1.y + p2.y) / 2\n        }\n      }\n      for(let i=0; i<num_inds; i++) {\n        if(i === 0){\n          let theta0 = 2 * Math.PI * ind(i-1) / num_inds\n          let theta1 = 2 * Math.PI * ind(i) / num_inds\n          let theta2 = 2 * Math.PI * ind(i+1) / num_inds\n          let point0 = this.thetaR2xy(theta0, data[index[ind(i-1)]], cx, cy)\n          let point1 = this.thetaR2xy(theta1, data[index[ind(i)]], cx, cy)\n          let point2 = this.thetaR2xy(theta2, data[index[ind(i+1)]], cx, cy)\n          let s = middle(point0, point1)\n          let e = middle(point1, point2)\n          cont.moveTo(s.x, s.y)\n          cont.quadraticCurveTo(point1.x, point1.y, e.x, e.y)\n        }\n        else{\n          let theta1 = 2 * Math.PI * ind(i) / num_inds\n          let theta2 = 2 * Math.PI * ind(i+1) / num_inds\n          let point1 = this.thetaR2xy(theta1, data[index[ind(i)]], cx, cy)\n          let point2 = this.thetaR2xy(theta2, data[index[ind(i+1)]], cx, cy)\n          let e = middle(point1, point2)\n          cont.quadraticCurveTo(point1.x, point1.y, e.x, e.y)\n        }\n      }\n    },\n    // draw FFT result\n    draw_pic(cont, w, h, d) {\n      const that = this\n      const contCenter = {\n        x: w / (2 * this.ratio), \n        y: h / (2 * this.ratio)\n      };\n      const array = new Uint8Array(this.analyser.frequencyBinCount)\n      this.analyser.getByteFrequencyData(array)\n      const data = Array.from(array)\n      let avg = 0\n      if(data !== null && data !== undefined){\n        for(let i=0; i<data.length; i++){\n          avg += data[i] / 255\n        }\n        avg = avg / data.length * 50\n      }\n      this.avgF = Math.min(avg, 50)\n      const points = data.map(function(element){\n        return d + that.avgF + element / 3\n      });\n      const powBase = Math.pow(2, this.powBaseRatio)\n      let inds = []\n      let exp = 0\n      while(true){\n        let pows = Math.round(Math.pow(powBase, exp) - 1)\n        if(pows >= points.length) break\n        inds.push(pows)\n        exp ++\n      }\n      const unique_inds = _.uniq(inds)\n      cont.beginPath()\n      cont.lineWidth = 3\n      // cont.lineCap = \"round\"\n      this.draw_smooth_curve(cont, points, unique_inds, contCenter.x, contCenter.y)\n      // cont.strokeStyle = \"rgba(255,255,255,0.7)\"\n      cont.stroke()\n    },\n    // draw music info\n    draw_info() {\n      this.ctxInfo.clearRect(0, 0, this.info.width, this.info.height)\n      this.ctxInfo.save()\n\n      const cx = this.info.width / (2 * this.ratio)\n      const cy = this.info.height / (2 * this.ratio)\n\n      // draw progress\n      const gradient = this.ctxInfo.createRadialGradient(cx, cy, this.innerR + this.avgF, cx, cy, 275)\n      const selector = 1\n      for(let i=0; i<this.color_groups[selector].length; i++){\n        gradient.addColorStop(this.color_groups[selector][i].pos, this.color_groups[selector][i].code)\n      }\n      this.ctxInfo.beginPath()\n      this.ctxInfo.strokeStyle = gradient\n      this.ctxInfo.fillStyle = gradient\n      this.ctxInfo.lineWidth = 3\n      let r = 0\n      if(this.player.musicPath) r = this.music.currentTime / this.music.duration * 2 * Math.PI\n      this.ctxInfo.arc(cx, cy, this.innerR + this.avgF, - Math.PI / 2, - Math.PI / 2 + r)\n      const ga = this.ctxInfo.globalAlpha\n      this.ctxInfo.globalAlpha = 0.3\n      this.ctxInfo.stroke()\n      this.ctxInfo.beginPath()\n      this.ctxInfo.lineWidth = 2\n      this.ctxInfo.arc(cx, cy, this.innerR + this.avgF, - Math.PI / 2 + r, Math.PI * 3 / 2)\n      this.ctxInfo.globalAlpha = 0.7\n      this.ctxInfo.stroke()\n      this.ctxInfo.globalAlpha = ga\n      this.draw_pic(this.ctxInfo, this.info.width, this.info.height, 200)\n      this.particles.draw(this.ctxInfo)\n      this.particles.next(this.info.width / (2 * this.ratio), this.info.height / (2 * this.ratio), this.innerR, this.avgF)\n\n      // draw dot\n      const xpos = this.info.width / (2 * this.ratio) + Math.sin(r) * (this.innerR + this.avgF)\n      const ypos = this.info.height / (2 * this.ratio) - Math.cos(r) * (this.innerR + this.avgF)\n\n      this.ctxInfo.beginPath()\n      this.ctxInfo.arc(xpos, ypos, this.scaleR, 0, 2 * Math.PI)\n      this.ctxInfo.fillStyle = 'rgba(255,255,255,0.3)'\n      this.ctxInfo.fill()\n\n      this.ctxInfo.beginPath()\n      this.ctxInfo.arc(xpos, ypos, 8, 0, 2 * Math.PI)\n      this.ctxInfo.fillStyle = 'rgba(255,255,255,0.9)'\n      this.ctxInfo.fill()\n\n      this.ctxInfo.beginPath()\n      this.ctxInfo.lineWidth = 6\n      this.ctxInfo.arc(xpos, ypos, 15, this.angle, this.angle + Math.PI / 3)\n      this.ctxInfo.strokeStyle = 'rgba(255,255,255,0.7)'\n      this.ctxInfo.stroke()\n\n      this.ctxInfo.beginPath()\n      this.ctxInfo.lineWidth = 6\n      this.ctxInfo.arc(xpos, ypos, 15, this.angle + Math.PI, this.angle + Math.PI * 4 / 3)\n      this.ctxInfo.strokeStyle = 'rgba(255,255,255,0.7)'\n      this.ctxInfo.stroke()\n\n      this.ctxInfo.restore()\n\n      // update variables\n      this.angle = this.angle + this.step\n      if(this.angle >= Math.PI * 2) this.angle = this.angle - Math.PI * 2\n      this.scaleR += this.scaleStep * this.v\n      if(this.scaleR >= 32) this.v = -1\n      if(this.scaleR <= 2) this.v = 1\n    },\n    init_music() {\n      const that = this\n      // load music information from ID3\n      if(this.fileInput !== undefined && this.fileInput.files.length > 0) {\n        mmb.parseBlob(this.fileInput.files[0])\n          .then( metadata => {\n            that.player.musicName = metadata.common.title\n            if (metadata.common.artist) that.player.musicAuthor = metadata.common.artist\n            else if (metadata.common.artists) that.player.musicAuthor = metadata.common.artists.join(' & ')\n            else that.player.musicAuthor = undefined\n            that.player.musicALbum = metadata.common.album\n          })\n          .catch( err => {\n            console.error(err.message)\n          })\n      }\n      if(this.player.musicPath !== ''){\n        this.music.src = this.player.musicPath\n        this.music.load()\n        const promise = this.music.play()\n        if (promise !== undefined) {\n          promise.then(function(_) {\n            console.log(\"music play successfully.\")\n            that.player.musicState = 'playing'\n          }).catch(function(error) {\n            console.log(error)\n          })\n        }\n      }\n    },\n    change_music(path) {\n      if(this.music === undefined || this.music === null){\n        this.player.musicPath = path\n        this.player.musicState = 'ready'\n        this.init_music()\n      }\n      else{\n        this.music.pause()\n        this.player.musicPath = path\n        this.init_music()\n      }\n    },\n    change_music_state() {\n      const that = this\n      this.click_count += 1\n      if(this.click_count == 1){\n        this.myAudioContext.resume().then(function(){\n          console.log('AudioContext resume successfully.')\n          that.init_music()\n        })\n      }\n      else if(this.player.musicPath === '') return\n      else{\n        if(this.player.musicState === 'ready') this.init_music()\n        else if(this.player.musicState === 'paused'){\n          this.music.play()\n          this.player.musicState = 'playing'\n        }\n        else if(this.player.musicState === 'playing'){\n          this.music.pause()\n          this.player.musicState = 'paused'\n        }\n      }\n    },\n    init_canvas(canvas, context) {\n      canvas.width = this.width\n      canvas.height = this.height\n      // finally query the various pixel ratios\n      const devicePixelRatio = window.devicePixelRatio || 1\n      const backingStoreRatio = context.webkitBackingStorePixelRatio || context.mozBackingStorePixelRatio || context.msBackingStorePixelRatio || context.oBackingStorePixelRatio || context.backingStorePixelRatio || 1\n      this.ratio = devicePixelRatio / backingStoreRatio\n      // upscale the canvas if the two ratios don't match\n      if (devicePixelRatio !== backingStoreRatio) {\n        const oldWidth = canvas.width\n        const oldHeight = canvas.height\n        canvas.width = oldWidth * this.ratio\n        canvas.height = oldHeight * this.ratio\n        canvas.style.width = oldWidth + 'px'\n        canvas.style.height = oldHeight + 'px'\n        // now scale the context to counter\n        // the fact that we've manually scaled\n        // our canvas element\n        context.scale(this.ratio, this.ratio)\n      }\n    },\n    initCanvases() {\n      this.init_canvas(this.info, this.ctxInfo)\n    },\n    draw_all() {\n      const that = this\n      //draw one animation frame\n      const draw_frame = function () {\n        that.draw_info()\n        requestAnimationFrame(draw_frame)\n      }\n      //initialize audio nodes\n      this.prepare_pic()\n      // initialize canvas\n      this.initCanvases()\n      // init particles\n      this.particles.init(this.info.width / (2 * this.ratio), this.info.height / (2 * this.ratio), this.innerR, this.avgF)\n\n      requestAnimationFrame(draw_frame)\n    }\n  }\n}\n</script>\n\n<style scoped>\n.outer-div{\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  margin: 0;\n  padding: 0;\n}\n\n.name-div{\n  /* height: 60px; */\n  width: 310px;\n  position: fixed;\n  transform: translateX(-50%);\n  left: 50%;\n  top: 230px;\n  text-align: center;\n  font-weight: 300;\n  font-family: 'Microsoft YaHei';\n  color: white;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.author-div{\n  /* height: 40px; */\n  width: 320px;\n  position: fixed;\n  transform: translateX(-50%);\n  left: 50%;\n  top: 330px;\n  text-align: center;\n  font-weight: 300;\n  font-family: 'Microsoft YaHei';\n  font-size: 22px;\n  color: white;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.album-div{\n  /* height: 25px; */\n  width: 280px;\n  position: fixed;\n  transform: translateX(-50%);\n  left: 50%;\n  top: 380px;\n  text-align: center;\n  font-family: 'Microsoft YaHei';\n  color: white;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.add-btn{\n  position: absolute;\n  bottom: 30px;\n  right: 30px;\n}\n\n.center{\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.cvs{\n  background-color: rgba(255,255,255,0);\n}\n</style>\n","// particle effect drawer\nconst num_circles = 30\nconst max_r = 8\nconst min_r = 3\nconst max_v = 0.8\nconst min_v = 0.5\nconst max_vopa = 0.012\nconst min_vopa = 0.007\nconst margin = 10\nfunction thetaR2xy(theta, r, cx, cy) {\n    const x = Math.round(cx + r * Math.sin(theta))\n    const y = Math.round(cy - r * Math.cos(theta))\n    return {\n        x: x,\n        y: y\n    }\n}\nfunction Circle(){\n    return this\n}\nCircle.prototype.init = function(x, y, innerR, avgF){\n    this.v = {x: 0, y: 0}\n    this.theta = Math.random() * Math.PI * 2\n    const vxy = Math.random() * (max_v - min_v) + min_v\n    this.v.x = vxy * Math.sin(this.theta)\n    this.v.y = vxy * - Math.cos(this.theta)\n    this.r = Math.random() * (max_r - min_r) + min_r\n    const p = thetaR2xy(this.theta, innerR + avgF + margin, x, y)\n    this.cx = p.x\n    this.cy = p.y\n    this.opacity = 1\n    this.vopa = Math.random() * (max_vopa - min_vopa) + min_vopa\n}\nCircle.prototype.next = function(x, y, innerR, avgF){\n    this.cx += this.v.x\n    this.cy += this.v.y\n    this.opacity -= this.vopa\n    if(this.opacity <= 0) this.init(x, y, innerR, avgF)\n}\nCircle.prototype.draw = function(cont){\n    cont.beginPath()\n    const ga = cont.globalAlpha\n    cont.arc(this.cx, this.cy, this.r, 0, Math.PI * 2)\n    cont.globalAlpha = this.opacity\n    cont.fill()\n    cont.globalAlpha = ga\n}\nfunction Circles(){\n    return this\n}\nCircles.prototype.init = function(x, y, innerR, avgF){\n    this.num = num_circles\n    this.list = []\n    for(let i=0; i<this.num; i++){\n        let t = new Circle()\n        t.init(x, y, innerR, avgF)\n        this.list.push(t)\n    }\n}\nCircles.prototype.next = function(x, y, innerR, avgF){\n    for(let i=0; i<this.num; i++){\n        this.list[i].next(x, y, innerR, avgF)\n    }\n}\nCircles.prototype.draw = function(cont){\n    for(let i=0; i<this.num; i++){\n        this.list[i].draw(cont)\n    }\n}\n\nexport default Circles","// particle effect drawer\nconst num_stars = 30\nconst max_r = 8\nconst min_r = 3\nconst max_v = 0.8\nconst min_v = 0.5\nconst max_vopa = 0.012\nconst min_vopa = 0.007\nconst margin = 10\nfunction thetaR2xy(theta, r, cx, cy) {\n    const x = Math.round(cx + r * Math.sin(theta))\n    const y = Math.round(cy - r * Math.cos(theta))\n    return {\n        x: x,\n        y: y\n    }\n}\nfunction Star(){\n    return this\n}\nStar.prototype.init = function(x, y, innerR, avgF){\n    this.v = {x: 0, y: 0}\n    this.theta = Math.random() * Math.PI * 2\n    const vxy = Math.random() * (max_v - min_v) + min_v\n    this.v.x = vxy * Math.sin(this.theta)\n    this.v.y = vxy * - Math.cos(this.theta)\n    this.r = Math.random() * (max_r - min_r) + min_r\n    const p = thetaR2xy(this.theta, innerR + avgF + margin, x, y)\n    this.cx = p.x\n    this.cy = p.y\n    this.opacity = 1\n    this.vopa = Math.random() * (max_vopa - min_vopa) + min_vopa\n}\nStar.prototype.next = function(x, y, innerR, avgF){\n    this.cx += this.v.x\n    this.cy += this.v.y\n    this.opacity -= this.vopa\n    if(this.opacity <= 0) this.init(x, y, innerR, avgF)\n}\nStar.prototype.draw = function(cont){\n    cont.beginPath()\n    const alpha = (2 * Math.PI) / 10\n    const ga = cont.globalAlpha\n    for(let i=11; i!=0; i--) {\n        let tr = this.r * (i % 2 + 1) / 2\n        let omega = alpha * i\n        cont.lineTo((tr * Math.sin(omega)) + this.cx, (tr * Math.cos(omega)) + this.cy)\n    }\n    cont.globalAlpha = this.opacity\n    cont.fill()\n    cont.globalAlpha = ga\n}\nfunction Stars(){\n    return this\n}\nStars.prototype.init = function(x, y, innerR, avgF){\n    this.num = num_stars\n    this.list = []\n    for(let i=0; i<this.num; i++){\n        let t = new Star()\n        t.init(x, y, innerR, avgF)\n        this.list.push(t)\n    }\n}\nStars.prototype.next = function(x, y, innerR, avgF){\n    for(let i=0; i<this.num; i++){\n        this.list[i].next(x, y, innerR, avgF)\n    }\n}\nStars.prototype.draw = function(cont){\n    for(let i=0; i<this.num; i++){\n        this.list[i].draw(cont)\n    }\n}\n\nexport default Stars","import { render } from \"./Canvas.vue?vue&type=template&id=8e34b1bc&scoped=true&bindings={\\\"height\\\":\\\"data\\\",\\\"width\\\":\\\"data\\\",\\\"FFTsz\\\":\\\"data\\\",\\\"Smoothing\\\":\\\"data\\\",\\\"powBaseRatio\\\":\\\"data\\\",\\\"barNumBase\\\":\\\"data\\\",\\\"bars\\\":\\\"data\\\",\\\"info\\\":\\\"data\\\",\\\"ctxInfo\\\":\\\"data\\\",\\\"music\\\":\\\"data\\\",\\\"myAudioContext\\\":\\\"data\\\",\\\"click_count\\\":\\\"data\\\",\\\"ratio\\\":\\\"data\\\",\\\"innerR\\\":\\\"data\\\",\\\"avgF\\\":\\\"data\\\",\\\"particles\\\":\\\"data\\\",\\\"fileInput\\\":\\\"data\\\",\\\"angle\\\":\\\"data\\\",\\\"step\\\":\\\"data\\\",\\\"scaleR\\\":\\\"data\\\",\\\"scaleStep\\\":\\\"data\\\",\\\"v\\\":\\\"data\\\",\\\"color_groups\\\":\\\"data\\\",\\\"player\\\":\\\"data\\\",\\\"analyser\\\":\\\"data\\\",\\\"AudioContext\\\":\\\"data\\\",\\\"requestAnimationFrame\\\":\\\"data\\\",\\\"cancelAnimationFrame\\\":\\\"data\\\",\\\"fontSizeName\\\":\\\"options\\\",\\\"fontSizeAlbum\\\":\\\"options\\\",\\\"click_input\\\":\\\"options\\\",\\\"prepare_pic\\\":\\\"options\\\",\\\"thetaR2xy\\\":\\\"options\\\",\\\"draw_smooth_curve\\\":\\\"options\\\",\\\"draw_pic\\\":\\\"options\\\",\\\"draw_info\\\":\\\"options\\\",\\\"init_music\\\":\\\"options\\\",\\\"change_music\\\":\\\"options\\\",\\\"change_music_state\\\":\\\"options\\\",\\\"init_canvas\\\":\\\"options\\\",\\\"initCanvases\\\":\\\"options\\\",\\\"draw_all\\\":\\\"options\\\"}\"\nimport script from \"./Canvas.vue?vue&type=script&lang=js\"\nexport * from \"./Canvas.vue?vue&type=script&lang=js\"\n\nimport \"./Canvas.vue?vue&type=style&index=0&id=8e34b1bc&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-8e34b1bc\"\n\nexport default script","import { render } from \"./App.vue?vue&type=template&id=72702bac&bindings={}\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&lang=css\"\nscript.render = render\n\nexport default script","import {createApp, Vue} from 'vue'\nimport App from './App.vue'\nimport ElementPlus from 'element-plus'\nimport 'element-plus/lib/theme-chalk/index.css'\n\nconst app = createApp(App)\napp.use(ElementPlus)\napp.mount('#app')\n","export { default } from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&lang=css\"; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&lang=css\"","export { default } from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Canvas.vue?vue&type=style&index=0&id=8e34b1bc&scoped=true&lang=css\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Canvas.vue?vue&type=style&index=0&id=8e34b1bc&scoped=true&lang=css\""],"sourceRoot":""}